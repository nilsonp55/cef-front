<div class="tittle-section">
    <h2>Gestión Centros Ciudades {{tipoCentroCiudad}}</h2>
</div>


<div class="mat-table-custom" *ngIf="mostrarTabla">
    <div class="controls-container">
        <button mat-raised-button color="primary" class="button-custom" (click)="crearCentroCiudad()">
            Nuevo
        </button>
    </div>
    <div *ngIf="spinnerActive" class="disenio-spinner">
        <app-spinner></app-spinner>
    </div>

    <div [hidden]="spinnerActive">
        <table mat-table [dataSource]="dataSourceTiposCuentas" matSort class="configScroll" aria-label="centrosCiudad">
            <tr>
                <ng-container matColumnDef="idCentroCiudad">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>ID CENTRO CIUDAD</th>
                    <td mat-cell *matCellDef="let element"> {{element.idCentroCiudad}} </td>
                </ng-container>
                <ng-container matColumnDef="bancoAval" >
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>BANCO</th>
                    <td mat-cell *matCellDef="let element"> {{element.bancoAval.nombreBanco}} </td>
                </ng-container>
                <ng-container matColumnDef="ciudad" >
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>CIUDAD</th>
                    <td mat-cell *matCellDef="let element"> {{element.ciudadDane.nombreCiudad}} </td>
                </ng-container>
                <ng-container matColumnDef="codigoCentro" >
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>CÓDIGO CENTRO</th>
                    <td mat-cell *matCellDef="let element"> {{element.codigoCentro}} </td>
                </ng-container>
                <ng-container matColumnDef="acciones" >
                    <th mat-header-cell *matHeaderCellDef class="text-center">ACCIONES</th>
                    <td mat-cell *matCellDef="let element" class="custom-column-center">
                        <button mat-button (click)="editar(element)">
                            <mat-icon style="color: green">edit</mat-icon>
                        </button>
                        <button mat-button (click)="confirmaEliminar(element)">
                            <mat-icon style="color: red">delete</mat-icon>
                        </button>
                    </td>
                </ng-container>
            </tr>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsTiposCuentas"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsTiposCuentas;"></tr>
        </table>
    </div>

</div>


<div *ngIf="mostrarFormulario" class="form-containter">
    <div [formGroup]="form" class="form-fields">
        <mat-form-field appearance="fill">
            <input matInput placeholder="Centro ciudad" formControlName="idCentroCiudad">
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Banco Aval</mat-label>
            <mat-select formControlName="bancoAval">
                <mat-option *ngFor="let item of bancos" [value]="item">
                    {{item.nombreBanco}}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="form.get('bancoAval').hasError('required')">Este campo es requerido</mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Ciudad</mat-label>
            <mat-select formControlName="codigoDane">
                <mat-option *ngFor="let ciudad of ciudades" [value]="ciudad">
                    {{ciudad.nombreCiudad}}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="form.get('codigoDane').hasError('required')">Este campo es requerido</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <input matInput placeholder="Código Centro" formControlName="codigoCentro">
            <mat-error *ngIf="form.get('codigoCentro').hasError('required')">Este campo es requerido</mat-error>
            <mat-error *ngIf="form.get('codigoCentro').hasError('pattern')">Ingresar únicamente valores
                numéricos</mat-error>
        </mat-form-field>
    </div>
    <div class="button-container">
        <button mat-raised-button class="button-custom" color="primary" (click)="persistir()" [disabled]="form.invalid">
            Aceptar
        </button>
        <button mat-raised-button color="warn" class="button-custom" (click)="onCancel()">Cancelar</button>
    </div>
</div>
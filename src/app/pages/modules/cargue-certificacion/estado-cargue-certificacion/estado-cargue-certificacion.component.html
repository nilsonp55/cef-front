<div class="tittle-section mb-2">
    <h2>Estado de Cargue Archivos de Certificaci√≥n</h2>
    <h3>Cantidad de archivos cargados por TDV y Banco en un rango de fechas</h3>
</div>
<div class="mat-table-custom simple-view">
    <div class="table-filter-container">
        <mat-form-field appearance="fill">
            <mat-label>Fecha Inicial</mat-label>
            <input matInput [matDatepicker]="picker1" [formControl]="serializedDate" [(ngModel)]="fecha1">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Fecha final</mat-label>
            <input matInput [matDatepicker]="picker2" [formControl]="serializedDate" [(ngModel)]="fecha2">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
        <div class="action-filter-container">
            <button title="Buscar y Visualizar" mat-button (click)="buscar()">
                <mat-icon style="color: green; font-size: 2em">search</mat-icon>
            </button>
            <button title="Limpiar Filtros" mat-button (click)="limpiar()">
                <mat-icon style="color: rgb(0, 2, 128); font-size: 2em;">autorenew</mat-icon>
            </button>
        </div>
    </div>
    <div class="mat-table-custom">
        <mat-tab-group (selectedIndexChange)="changeTab($event)">
            <mat-tab label="RESUMEN ESTADO DE CARGUE">
                <div *ngIf="spinnerActive" class="disenio-spinner">
                    <mat-spinner></mat-spinner>
                </div>
                <div *ngIf="!spinnerActive && mostrarTabla">
                    <div class="controls-container">
                        <button class="button-custom" mat-raised-button color="primary"
                            (click)="exporterTable('resumen_estado_cargue')">Exportar</button>
                    </div>
                    <table mat-table matTableExporter [dataSource]="dataSourceResumen" matSort
                        #exporterResumen="matTableExporter" class="mat-elevation-z8" aria-label="resumen-estado-cargue">
                        <tr>
                            <ng-container matColumnDef="transportadora">
                                <th mat-header-cell *matHeaderCellDef>TRANSPORTADORA</th>
                                <td mat-cell *matCellDef="let element"> {{element.transportadora}} </td>
                            </ng-container>
                            <ng-container matColumnDef="estado">
                                <th mat-header-cell *matHeaderCellDef>ESTADO</th>
                                <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
                            </ng-container>
                            <ng-container matColumnDef="bavv">
                                <th mat-header-cell *matHeaderCellDef>BAVV</th>
                                <td mat-cell *matCellDef="let element"> {{element.bavv}} </td>
                            </ng-container>
                            <ng-container matColumnDef="bbog">
                                <th mat-header-cell *matHeaderCellDef>BBOG</th>
                                <td mat-cell *matCellDef="let element"> {{element.bbog}} </td>
                            </ng-container>
                            <ng-container matColumnDef="bocc">
                                <th mat-header-cell *matHeaderCellDef>BOCC</th>
                                <td mat-cell *matCellDef="let element"> {{element.bocc}} </td>
                            </ng-container>
                            <ng-container matColumnDef="bpop">
                                <th mat-header-cell *matHeaderCellDef>BPOP</th>
                                <td mat-cell *matCellDef="let element"> {{element.bpop}} </td>
                            </ng-container>
                        </tr>
                        <tr mat-header-row *matHeaderRowDef="displayedColumnsTransportadora"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsTransportadora;"></tr>
                    </table>
                </div>
            </mat-tab>
            <mat-tab label="ARCHIVOS ACEPTADOS">
                <div *ngIf="spinnerActive" class="disenio-spinner">
                    <mat-spinner></mat-spinner>
                </div>
                <div [hidden]="!mostrarTabla">
                    <div class="controls-container">
                        <button class="button-custom" mat-raised-button color="primary"
                            (click)="exporterTable('archivos_aceptados')">Exportar</button>
                        <div class="paginator-area">
                            <mat-paginator #paginatorAceptados [pageSize]="10"
                                [pageSizeOptions]="getPageOptionPerTable(cantidadRegistrosAceptados)"
                                [length]="cantidadRegistrosAceptados" showFirstLastButtons>
                            </mat-paginator>
                        </div>
                    </div>
                    <table mat-table matTableExporter [dataSource]="dataSourceAceptados" matSort
                        #sortAceptados="matSort" #exporterAceptados="matTableExporter" class="mat-elevation-z8"
                        aria-label="archivos-aceptados">
                        <tr>
                            <ng-container matColumnDef="fondo">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>FONDO</th>
                                <td mat-cell *matCellDef="let element"> {{element.fondo}} </td>
                            </ng-container>
                            <ng-container matColumnDef="ciudad">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>CIUDAD</th>
                                <td mat-cell *matCellDef="let element"> {{element.ciudad}} </td>
                            </ng-container>
                            <ng-container matColumnDef="tdv">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>TDV</th>
                                <td mat-cell *matCellDef="let element"> {{element.tdv}} </td>
                            </ng-container>
                            <ng-container matColumnDef="banco">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>BANCO</th>
                                <td mat-cell *matCellDef="let element"> {{element.banco}} </td>
                            </ng-container>
                            <ng-container matColumnDef="estado">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>ESTADO</th>
                                <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
                            </ng-container>
                            <ng-container matColumnDef="nomArch">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>NOM_ARCH</th>
                                <td mat-cell *matCellDef="let element"> {{element.nomArch}} </td>
                            </ng-container>
                        </tr>
                        <tr mat-header-row *matHeaderRowDef="displayedColumnsAceptados"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsAceptados;"></tr>
                    </table>
                </div>
            </mat-tab>
            <mat-tab label="ARCHIVOS FALTANTES">
                <div *ngIf="spinnerActive" class="disenio-spinner">
                    <mat-spinner></mat-spinner>
                </div>
                <div [hidden]="!mostrarTabla">
                    <div class="controls-container">
                        <button class="button-custom" mat-raised-button color="primary"
                            (click)="exporterTable('archivos_faltantes')">Exportar</button>
                        <div class="paginator-area">
                            <mat-paginator #paginatorFaltantes [pageSize]="10"
                                [pageSizeOptions]="getPageOptionPerTable(cantidadRegistrosFaltantes)"
                                [length]="cantidadRegistrosFaltantes" showFirstLastButtons>
                            </mat-paginator>
                        </div>
                    </div>
                    <table mat-table matTableExporter [dataSource]="dataSourceFaltantes" matSort
                        #sortFaltantes="matSort" #exporterFaltantes="matTableExporter" class="mat-elevation-z8"
                        aria-label="archivos-faltantes">
                        <tr>
                            <ng-container matColumnDef="archivo">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>ARCHIVO</th>
                                <td mat-cell *matCellDef="let element"> {{element.archivo}} </td>
                            </ng-container>
                        </tr>
                        <tr mat-header-row *matHeaderRowDef="displayedColumnsFaltantes"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsFaltantes;"></tr>
                    </table>
                </div>
            </mat-tab>
            <mat-tab label="ARCHIVOS SIN FONDOS ACTIVOS">
                <div *ngIf="spinnerActive" class="disenio-spinner">
                    <mat-spinner></mat-spinner>
                </div>
                <div [hidden]="!mostrarTabla">
                    <div class="controls-container">
                        <button class="button-custom" mat-raised-button color="primary"
                            (click)="exporterTable('archivos_sin_fondos')">Exportar</button>
                        <div class="paginator-area">
                            <mat-paginator #paginatorSinFondos [pageSize]="10"
                                [pageSizeOptions]="getPageOptionPerTable(cantidadRegistrosSinFondos)"
                                [length]="cantidadRegistrosSinFondos" showFirstLastButtons>
                            </mat-paginator>
                        </div>
                    </div>
                    <table mat-table matTableExporter [dataSource]="dataSourceSinFondos" matSort
                        #sortSinFondos="matSort" #exporterSinFondos="matTableExporter" class="mat-elevation-z8"
                        aria-label="archivos-sin-fondos">
                        <tr>
                            <ng-container matColumnDef="archivo">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>ARCHIVO</th>
                                <td mat-cell *matCellDef="let element"> {{element.archivo}} </td>
                            </ng-container>
                        </tr>
                        <tr mat-header-row *matHeaderRowDef="displayedColumnsSinFondos"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsSinFondos;"></tr>
                    </table>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>


</div>